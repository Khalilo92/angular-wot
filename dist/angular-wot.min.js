var wot=angular.module("wot",["coap"]);angular.module("wot").factory("TdParser",["$http","CoAP",function(t,r){var o={},e=["xsd:byte","xsd:float","xsd:decimal","xsd:int","xsd:long","xsd:unsignedByte","xsd:unsignedShort"];return o.isNumericType=function(t){return-1!=e.indexOf(t)},o.createThing=function(t){var r={name:t.metadata.name,properties:[],actions:[],uri:t.metadata.protocols.HTTP?t.metadata.protocols.HTTP.uri:t.metadata.protocols.CoAP.uri,protocols:t.metadata.protocols};return t.interactions.filter(function(t){return"Property"==t["@type"]}).forEach(function(t){r.properties.push({name:t.name,writable:t.writable,xsdType:t.outputData,autoUpdate:!1,history:[],parent:r,isNumeric:function(){return isNumericType(this.xsdType)}})}),t.interactions.filter(function(t){return"Action"==t["@type"]}).forEach(function(t){r.actions.push({name:t.name,xsdParamType:t.inputData,xsdReturnType:t.outputData,parent:r})}),r},o.fromUrl=function(e){return"coap"==e.substring(0,4)?r.get(e).then(function(t){return JSON.parse(t)}).then(o.createThing):t.get(e).then(function(t){return t.data}).then(o.createThing)},o.parseJson=function(t){var r=JSON.parse(t);return o.createThing(r)},o}]),angular.module("wot").factory("ThingClient",["$http","CoAP",function(t,r){var o={};return o.readProperty=function(o,e){function n(t){for(e.value=t,e.history.push(t);e.history.length>=20;)e.history.shift()}return o.protocols.HTTP?t.get(o.protocols.HTTP.uri+"/"+e.name).then(function(t){return t.data.value}).then(n):o.protocols.CoAP?r.get(o.protocols.CoAP.uri+"/"+e.name).then(function(t){return JSON.parse(t).value}).then(n):void 0},o.writeProperty=function(o,e){return o.protocols.HTTP?t.put(o.protocols.HTTP.uri+"/"+e.name,{value:e.value}):r.put(o.protocols.CoAP.uri+"/"+e.name,{value:e.value})},o.callAction=function(o,e,n){var a={value:n};return"WoTScript"===e.xsdParamType&&(a=n),o.protocols.HTTP?t.post(o.protocols.HTTP.uri+"/"+e.name,a):r.post(o.protocols.CoAP.uri+"/"+e.name,a)},o}]);
//# sourceMappingURL=angular-wot.min.js.map
